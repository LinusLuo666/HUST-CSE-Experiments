# 多媒体

实验一在4SHIYAN中

实验二在.\44SHIYAN\实验源代码

实验一总结：

LSB1实验1

LSB2错了的实验2

LSB3对的实验2

hist_change LSB

test test2 实验3

StgPrb 卡方函数

一些前人的链接：

[卡方的链接](https://blog.csdn.net/weixin_46447549/article/details/121626375?spm=1001.2014.3001.5506)  [LSB](https://blog.csdn.net/weixin_46447549/article/details/120787226?spm=1001.2014.3001.5506)

[学长1](https://blog.csdn.net/weixin_45695828/article/details/124211945) [学长2](https://blog.csdn.net/qq_46106285/article/details/124590985)

自对比度掩蔽是一种掩蔽效应，具有相同空间频率、取向和位置的信号的掩蔽效应。这种掩蔽效应通常用于图像处理中的图像增强。

抗卡方隐写：

随机序列，容量减少   或使用不含秘密信息的像素进行补偿

LSB隐写改进为LSB匹配隐写

顺序选取像素点导致图像各部分统计特征不一致。为了解决这一问题，可以随机间隔选取像素序列。与顺序嵌入相比，需要设计随机取点的算法。
嵌入：
1）用伪装密钥k作为伪随机数发生器的种子，生成
伪随机序列，嵌入位置为：

j1=k1

ji=ji-1+ki i≥2

2）利用伪随机序列选取图像载体像素的最低有效位，排列起来作为秘密信息载体
3）将秘密信息按位替换到载体中
4）展示原始图像和隐写图像的局部直方图

提取：
1）用伪装密钥k作为伪随机数发生器的种子，生成伪随机序列，
2）根据伪随机序列，画出图像随机序列位置，选取该序列像素的最低有效位排列起来作为秘密信息载体

满嵌入 随机嵌入 10000110 46132123

LSB1实验1

LSB2错了的实验2

LSB3对的实验2

hist_change LSB

test test2 实验3

StgPrb 卡方函数

[卡方的链接](https://blog.csdn.net/weixin_46447549/article/details/121626375?spm=1001.2014.3001.5506)  [LSB](https://blog.csdn.net/weixin_46447549/article/details/120787226?spm=1001.2014.3001.5506)

**`try`** 和 **`catch`** 是 MATLAB 中用于处理异常的语句。

在 **`try`** 块中，你可以编写可能会抛出异常的代码。如果异常被抛出，程序将停止执行，控制流将跳转到与该 **`try`** 块相关的 **`catch`** 块。

在 **`catch`** 块中，你可以编写处理异常的代码。**`catch`** 块将接收一个异常对象，该对象包含有关抛出异常的信息。你可以使用该信息来确定如何处理异常。在 **`catch`** 块中，你还可以使用 **`rethrow`** 命令重新抛出异常，以便其他部分的代码可以继续处理它。

jpeg_read(a)容易出错，必须把文件夹（pwd）设置到这个文件夹里才行

![Untitled](%E5%A4%9A%E5%AA%92%E4%BD%93%20b7dc154d9a6246f7886ffd2322e52eea/Untitled.png)

`jobj` 是一个包含了读取的JPEG图像的信息的结构体，其中包括了图像的尺寸、压缩质量、色彩空间、DCT系数等相关信息。在MATLAB中，我们可以使用 `jpeg_read` 函数读取JPEG图像文件，并将其存储为一个结构体 `jobj`。

这个结构体包括以下字段：

- `filename`：图像文件名。
- `bits`：每个像素的位深度。
- `color_space`：色彩空间（'grayscale' 或 'RGB'）。
- `comment`：图像的注释信息。
- `density_unit`：像素密度的单位。
- `density_x` 和 `density_y`：图像的水平和垂直像素密度。
- `image_height` 和 `image_width`：图像的高度和宽度。
- `quality`：图像的压缩质量。
- `restart_interval`：DCT块之间的重启间隔。
- `coef_arrays`：一个包含DCT系数的细节结构体数组，每个元素都包含一个8x8块的DCT系数。
- `quant_tables`：一个包含量化表的细节结构体数组，每个元素都包含一个8x8的量化表。

在这里，我们主要使用了 `coef_arrays` 字段，从中提取了第一个分量的DCT系数，以进行隐写术的信息嵌入。

在JPEG压缩中，图像会被分成若干个8x8的块（block），每个块都会经过离散余弦变换（DCT）进行变换，生成对应的DCT系数，从而将块中的信息表示为一组系数。在 `jobj` 结构体中，`coef_arrays` 字段存储了所有的DCT系数。

具体来说，`coef_arrays` 是一个细节结构体数组，其中的每个元素对应于一个DCT分量。JPEG图像通常包含3个DCT分量，它们分别对应于亮度（Y）和两个色度（Cb和Cr）通道。在本例中，由于我们处理的是灰度图像，因此只有一个分量。每个DCT分量都被存储为一个以列为主的线性向量，其长度为64，对应于8x8的DCT系数块。因此，每个 `coef_arrays` 中的元素都是一个64元素的向量，对应于图像中的一个8x8块。

总之，`coef_arrays` 中的元素包含了DCT系数，这些系数可以用来重建JPEG图像。在本例中，我们从 `coef_arrays` 中提取了第一个分量（即灰度通道的分量），以进行信息隐藏。

### **JSteg是LSB隐写算法在DCT域的实现（DCT系数怎么得到？）**

JSteg 是一种基于 DCT 系数的隐写算法，它的实现方式是将隐藏信息嵌入到 JPEG 图像的 DCT 系数中。JPEG 压缩算法会对图像进行 8x8 的分块，并对每个块进行 DCT 变换得到 DCT 系数矩阵。因此，要使用 JSteg 隐写算法，需要先提取出 JPEG 图像的 DCT 系数。

提取 JPEG 图像的 DCT 系数可以使用现成的 JPEG 解码库来实现。在 MATLAB 中，可以使用 `jpeg_read()` 函数读取 JPEG 图像，并通过访问解码后的结果来获取 DCT 系数矩阵。例如，下面的代码可以读取 JPEG 图像 `cover.jpg` 并提取出其中的 DCT 系数矩阵：

```
jobj = jpeg_read('cover.jpg');
dct = jobj.coef_arrays{1};
```

其中 `jobj.coef_arrays{1}` 表示 JPEG 图像解码后的 DCT 系数矩阵。注意，在 JPEG 中，DCT 系数是有正负号的，因此在使用 LSB 隐写算法时，需要考虑正负号的影响。

### 可以直接对图像进行DCT变换后嵌入再反变换得到图像吗？

在理论上，可以直接对图像进行 DCT 变换，然后将隐藏信息嵌入到 DCT 系数中，并通过 DCT 的逆变换得到包含隐藏信息的图像。但是，在实践中，这种方法可能会出现一些问题，主要原因是 JPEG 压缩算法对 DCT 系数进行了量化和编码，导致 DCT 系数的精度和质量有所降低。

具体来说，JPEG 压缩算法在 DCT 变换后会对 DCT 系数进行量化，以减小编码后的数据量。量化的过程会舍去部分小数位，导致 DCT 系数的精度降低，因此在进行 DCT 变换后，原图像的某些细节信息可能已经丢失。此外，JPEG 编码的过程中也可能会对 DCT 系数进行某些优化操作，如哈夫曼编码等，这也可能会导致隐藏信息的丢失。

因此，为了保证隐写算法的可靠性和稳定性，通常采用 JSteg 这种在 JPEG 图像的 DCT 系数中直接嵌入隐藏信息的方法，而不是对原图像进行 DCT 变换后再进行嵌入。

### JSteg (JPEG Steganography)只适用于JPEG压缩方式的图像（为什么？）

JSteg（JPEG Steganography）是一种在 JPEG 图像中嵌入隐藏信息的隐写术。其之所以只适用于 JPEG 压缩方式的图像，主要原因有以下两点：

1. DCT 变换：JSteg 是在 JPEG 压缩的 DCT 域中进行嵌入的。而 DCT 变换是 JPEG 压缩算法中的一步，将图像从时域变换到频域，以减少图像的冗余信息，达到更好的压缩效果。因此，只有 JPEG 压缩方式的图像才有 DCT 变换的特征。
2. 量化和编码：在 JPEG 压缩中，DCT 变换后的系数需要经过量化和编码才能输出到压缩文件中。量化过程会将一部分 DCT 系数变成零，从而进一步提高压缩比。而编码过程会将 DCT 系数按照一定的规则映射到压缩文件中，从而使压缩文件大小进一步减小。这些量化和编码的过程对嵌入隐藏信息有很大的影响，因此只有针对 JPEG 压缩方式的图像才能进行有效的隐写嵌入。

综上所述，JSteg 只适用于 JPEG 压缩方式的图像，这是因为 JSteg 是基于 JPEG 压缩算法的 DCT 变换、量化和编码等特性来实现信息隐藏的。其他类型的图像（如 PNG、BMP 等）不具备这些特性，因此无法使用 JSteg 进行隐写嵌入。

[论文](https://www.notion.so/2818a4253aa0468d9dd01c59494fcb40)